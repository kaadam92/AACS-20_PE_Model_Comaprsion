\documentclass[twoside,b5paper,10pt]{article}
\usepackage{AUTstyle}

\input{kaadam_todo}
\input{Figure/tikz/tikzinit}

\title{PMSM Motor Model for P-HIL Application}
\author{Dávid Kiss}

\institution{Department of Automation and Applied Informatics \\
Budapest University of Technology and Economics}

\email{david.kiss@aut.bme.hu}

\headerTitle{PMSM Motor Model for P-HIL Application \dots}
\headerAuthor{Dávid Kiss}


\begin{document}
\makeAutStyleTitle

\begin{abstract}
Electrical drive simulation is one of the key areas of the emerging trends in power electronics. There are many off-the-shelf solutions available on the market, even engineering tools, like MATLAB/Simulink developed it's own solution for the problem in the Simscape Electrical toolbox. These Solutions however are not open for modification, limiting the field in which they can be used. For motor simulation purposes, different approach seem to be necessary. Real-time execution also crucial in case of HIL\footnote{Hardware-in-the-Loop} and P-HIL\footnote{Power Hardware-in-the-Loop} application.
There are claims, the solutions from different suppliers are applicable for on-line simulation, aiming for HIL and P-HIL environments. This Paper introduces a custom developed motor model, usable for motor emulation and compares it with the PMSM model provided by MATLAB/Simulink.
\end{abstract}


\begin{keywords}
Simulation; PMSM; MATLAB; Real-Time AACS Workshop; (list of $5$-$7$ keywords in this
format)
\end{keywords}

\listoftodos

\section{Introduction}
\label{sec:Introdu}

Electrical drive development is one of the most significant area of the industry nowadays. Intelligent drive modules are penetrating the automotive industry day-by-day. In the traction systems scaling from small power, mild-hybrid applications, to multiple hundred $kW$ Battery Electric Vehicle\footnote{BEV} applications. Electrification is not only present in the drivetrains of the vehicles, but auxiliary devices are started to be electrified as well instead of the pneumatic or hydraulic energy source. Due to the limitations of nowadays battery technology efficiency of all these systems becomes essential factor, due to the direct effects on the vehicle's range.  The emerging number of wind-turbines and renewable energy sources, requires developments in the $MW$ range as well. The rapid development characterizes not just the electrical machines, but the controlling inverters and power conversion devices as well, demanding advancement from the semiconductors and the embedded computation units as well. With today's \emph{SiC} and \emph{GaN} semiconductors, switching frequencies in the $100\ kHz$ range becoming usual.



The following chapters of this paper are organized as follows: \sectionname~\ref{sec:matPMSM} briefly introduce the modeling technique behind the PMSM machine and discusses the parameters of the example machine. \sectionname~\ref{sec:simulink_model} investigates the PMSM motor model available in MATLAB/Simulink (r2019b) SimScape Electrical toolbox. \sectionname~\ref{sec:custom_model} introduces the model solution implemented by the author. In \sectionname~\ref{sec:test_framework} the test environment and the test cases are introduced. The simulation results are summarized and evaluated in \sectionname~\ref{sec:results}. Finally, in \sectionname~\ref{sec:conclusion} the following steps will be introduced with a brief outlook to the author goals. 

\todo[inline]{Nincs még kész.}

\section{Mathematical model of a PMSM Machine}
\label{sec:matPMSM}

The Automotive industry always played a key role in innovation and always pioneered with new and emerging technologies. The situation is no different in the case of electrification nowadays. Electrical motors are the core element of modern hybrid (HEV) and Battery Electric Vehicle's (BEV) drivetrains. Volume and mass is a very limiting factor, especially in the case of BEV vehicles, because the saved mass and volume provides more space for the battery itself, providing higher range for the vehicle. Because of these reasons, 3-phase induction (IM\footnote{Induction Machine}) and PMSM\footnote{Permanent Magnet Synchronous Machine} machines are commonly used in traction (and other actuation) systems in the automotive industry. The difference between these two type of electrical machines is the source of the magnetic flux inside. In the case of the IM the magnetic field has to come from external excitation, in the PMSM machine, as the name suggests, the magnetic field is generated by the built-in permanent magnets. PMSM machines are especially superior in power density, however their drawback is the necessity of complex control algorithms and the expensive magnetic material.

\info[inline]{Itt még be kell hivatkozni Veszprémi könyvét meg írni arról, hogy miért király a PMSM!}


This paper details the mathematical description of the PMSM due to it's simplicity, with the following assumptions:
\begin{itemize}
  \item The machine is symmetrical ($L_d = L_q$)
  \item The stator winding are in star connection
  \item Losses are neglected (Ventilation, internal friction, iron losses)
  \item Coil inductance and resistances are constant
\end{itemize}

To derive the equations describing a PMSM machine, it worth to take a look on the external excitation DC machine, presented on Fig. \ref{fig:dc_machine}.

\input{Figure/fig_includes/ext_dc_fig}

From the equivalent circuit, Eq. \ref{eq:dc_dt} can be deducted. These Equations describing the relationship between the motor input voltage, current, torque and speed.

\input{Equations/dc_motor_eq_dt}

The electrical difference between the stator of a PMSM and a DC motor, the PMSM has a 3-phase winding with the spatial displacement of $\deg{120}$, connected in star. Each phase can modelled as a series RL and a voltage source. 

\input{Figure/fig_includes/threephase_winding_fig}

If there no alternative current conducting path, other than the three phase connection (No parasitic coupling or short to earth), the 3-phase current system is symmetrical, meaning $I_A + I_B + I_C = 0$, thus the current phasor can be described with two independent values instead of three. To utilize this simplification, the Clark transformation is utilised, presented on Eq. \ref{eq:clark}

\input{Equations/clark}

To get back the values in the original 3-phase reference frame, the Inverse-Clark transformation (Eq. \ref{eq:inv_clark}.) is used.

\input{Equations/inverse_clark}



\input{Equations/park}
\input{Equations/inverse_park}

\input{Equations/dc_motor_eq_s}

\input{Figure/fig_includes/motor_fig}

\input{Figure/fig_includes/coord_fig}

\input{Tables/motor_data_tab}

\section{The Simulink Built-In Implementation}
\label{sec:simulink_model}

\section{The Custom Implementation}
\label{sec:custom_model}

\section{Test Framework}
\label{sec:test_framework}

\section{Result of Comparsion}
\label{sec:results}

\section{Conclusion}
\label{sec:conclusion}


\section{Bibliography}
\label{sec:bib}

\section*{Acknowledgments}
 { \small The author would like to express his thanks to Dr. István Varjasi for his support as a scientific advisor.
This work has been supported by the Department of Automation and Applied Informatics}

\makeAutBib{reni,itemsetmining}

\end{document}
